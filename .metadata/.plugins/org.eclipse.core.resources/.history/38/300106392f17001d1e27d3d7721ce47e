package ui;

import java.util.ArrayList;

import controllers.FilmeController;
import dto.FilmeDto;
import utils.Leitura;

public class UI {
	
	private enum MENU {
		CADASTRAR_FILME(1),
		LISTAR_FILMES(2),
		PROCURAR_POR_NOME(3),
		PROCURAR_POR_DIRETOR(4),
		PROCURAR_POR_ATOR(5),
		PROCURAR_POR_NOTA(6),
		SAIR(7);

		private int valor;
		
		MENU(int valor) {
			this.valor = valor; 
		}
		
		public void setValor(int valor) {
			this.valor = valor;
		}
	};
	
	private FilmeController fc;
	
	public UI() {
		this.fc = new FilmeController();
	}
	
	public void start() {
		divisoria();
		bemVindo();
		
		MENU escolhaMenu = MENU.SAIR;
		
		do{
			escolhaMenu.setValor(menu());
			
			switch(escolhaMenu) {
				case CADASTRAR_FILME:{
					cadastrarFilme();
				}
				case LISTAR_FILMES:{
					listarFilmes();
				}
			}
			
		} while(escolhaMenu != MENU.SAIR);
		
	}
	
	public void divisoria() {
		System.out.println("=========================");
	}
	
	public void titulo(String titulo) {
		divisoria();
		System.out.println(titulo);
		divisoria();
	}
	
	public void bemVindo() {
		System.out.println("Bem vindo ao aplicativo de cadastro de filmes.");
	}
	
	public int menu() {
		divisoria();
		System.out.println("Escolha uma opção do menu para continuar: ");
		divisoria();
		
		System.out.println(MENU.CADASTRAR_FILME); 
		System.out.println(" - Cadastrar um filme.");
		System.out.println(MENU.LISTAR_FILMES ); 
		System.out.println(" - Listar filmes cadastrados.");
		System.out.println(MENU.PROCURAR_POR_NOME); 
		System.out.println(" - Procurar um filme por nome.");
		System.out.println(MENU.PROCURAR_POR_DIRETOR); 
		System.out.println(" - Listar filmes de um diretor.");
		System.out.println(MENU.PROCURAR_POR_ATOR); 
		System.out.println(" - Listar filmes de um ator.");
		System.out.println(MENU.PROCURAR_POR_NOTA);
		System.out.println(" - Listar filmes por nota.");
		System.out.println("7 - Encerrar.");
		
		System.out.println();
		
		return Leitura.LeInt("Qual a opção desejada? ");
	}
	
	public boolean cadastrarFilme() {
		
		titulo("Cadastro de filme");
		
		String nome = Leitura.leStr("  Informe o nome do filme: ");
		String diretor = Leitura.leStr("  Informe o nome do diretor do filme: ");
		
		ArrayList<String> elenco = new ArrayList<String>();
		
		boolean maisAtores = true;
		
		do {
			String ator = Leitura.leStr("  Informe um(a) ator/atriz do filme ou -1 para parar de informar: ");
			
			if(!ator.equals("-1"))
				elenco.add(ator);
			else {
				if(elenco.size() > 0)
					maisAtores = false;
				else
					System.out.println("  ** Pelo menos um(a) ator/atriz deve ser infromado(a).");
			}
			
		} while (maisAtores);
		
		float nota = Leitura.LeFloat("  Informa a sua nota para o filme: ");
		
		return fc.addFilme(new FilmeDto(nome, diretor, (String[]) elenco.toArray(), nota));
	}
	
	public boolean listarFilmes() {
		
		titulo("Listar Filmes");
		
		
	}
	
}
